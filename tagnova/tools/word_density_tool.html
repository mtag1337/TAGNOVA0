<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1262927411271648"
     crossorigin="anonymous"></script>
    <title>ุนุฏุงุฏ ุงููููุงุช ููุญูู ุงููุซุงูุฉ | TajNova Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root { --color-primary: #10b981; /* Emerald Green */ }
        th, td { padding: 0.75rem; text-align: right; }
    </style>
</head>
<body class="bg-gray-100 text-slate-800">

    <header class="bg-white shadow-lg">
        <div class="max-w-6xl mx-auto p-6 flex justify-between items-center">
            <h1 class="text-3xl font-extrabold text-primary flex items-center">
                <i class="fas fa-calculator ml-2"></i> TajNova
            </h1>
            <a href="tools.html" class="text-blue-600 hover:text-blue-800 font-medium transition duration-150">
                <i class="fas fa-arrow-right-to-bracket ml-2"></i> ูุงุฆูุฉ ุงูุฃุฏูุงุช
            </a>
        </div>
    </header>

    <main class="max-w-6xl mx-auto py-10 px-4 sm:px-6 lg:px-8">
        
        <div class="bg-white p-8 rounded-xl shadow-2xl border-t-4 border-primary">
            <h2 class="text-3xl font-bold mb-6 text-slate-700">๐ ุนุฏุงุฏ ุงููููุงุช ููุญูู ูุซุงูุฉ ุงููููุงุช</h2>
            
            <textarea 
                id="text-input" 
                rows="10" 
                placeholder="ุงูุตู ุงููุต ููุง ูุชุญููู ุงููููุงุช ููุซุงูุฉ ุงููููุงุช ุงูููุชุงุญูุฉ..." 
                class="w-full p-4 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-primary transition duration-200 text-right text-lg"
            ></textarea>
            
            <div id="results-summary" class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
                <div class="bg-green-50 p-4 rounded-lg text-center">
                    <p class="text-xl font-bold text-gray-700">ุฅุฌูุงูู ุงููููุงุช</p>
                    <p id="word-count" class="text-3xl font-extrabold text-primary mt-1">0</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg text-center">
                    <p class="text-xl font-bold text-gray-700">ุฅุฌูุงูู ุงูุฃุญุฑู</p>
                    <p id="char-count" class="text-3xl font-extrabold text-primary mt-1">0</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg text-center">
                    <p class="text-xl font-bold text-gray-700">ูููุงุช ูุฑูุฏุฉ</p>
                    <p id="unique-count" class="text-3xl font-extrabold text-primary mt-1">0</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg text-center">
                    <p class="text-xl font-bold text-gray-700">ูุชูุณุท ุทูู ุงููููุฉ</p>
                    <p id="avg-length" class="text-3xl font-extrabold text-primary mt-1">0</p>
                </div>
            </div>
            
            <div id="density-container" class="mt-10 hidden">
                <h3 class="text-2xl font-bold mb-4 border-b pb-2 text-slate-700">๐ ุชุญููู ูุซุงูุฉ ุงููููุงุช ุงูููุชุงุญูุฉ</h3>
                <div class="bg-gray-50 p-4 rounded-lg shadow-inner overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-200">
                            <tr>
                                <th class="text-sm font-semibold uppercase tracking-wider">ุงููููุฉ</th>
                                <th class="text-sm font-semibold uppercase tracking-wider">ุงูุชูุฑุงุฑ</th>
                                <th class="text-sm font-semibold uppercase tracking-wider">ุงููุณุจุฉ (ูุซุงูุฉ)</th>
                            </tr>
                        </thead>
                        <tbody id="density-table-body" class="bg-white divide-y divide-gray-200">
                            </tbody>
                    </table>
                    <p class="text-sm text-gray-500 mt-4">ููุญูุธุฉ: ูุฐุง ุงูุชุญููู ูุณุชุจุนุฏ ุงููููุงุช ุงูุชููู ุงูุดุงุฆุนุฉ (ูุซู "ูู"ุ "ุฅูู"ุ "ูู") ูุงูุฑููุฒ.</p>
                </div>
            </div>

        </div>
    </main>

    <script>
        const textInput = document.getElementById('text-input');
        const wordCountEl = document.getElementById('word-count');
        const charCountEl = document.getElementById('char-count');
        const uniqueCountEl = document.getElementById('unique-count');
        const avgLengthEl = document.getElementById('avg-length');
        const densityContainer = document.getElementById('density-container');
        const densityTableBody = document.getElementById('density-table-body');
        
        // ูุงุฆูุฉ ุจูููุงุช ุงูุชููู ุงูุนุฑุจูุฉ ุงูุดุงุฆุนุฉ ูุงุณุชุจุนุงุฏูุง ูู ุชุญููู ุงููุซุงูุฉ
        const STOP_WORDS = new Set([
            "ู", "ูู", "ูู", "ุฅูู", "ุนูู", "ุนู", "ุฃู", "ูุง", "ูุง", "ูุฐุง", "ูุฐู", "ุฐูู", "ุชูู", "ูุงู", 
            "ูููู", "ุฃู", "ูู", "ูู", "ูู", "ุงูุชู", "ุงูุฐู", "ุงูุฐูู", "ูุฃู", "ุจูู", "ูุน", "ูุฏ", 
            "ููู", "ุซู", "ูุฏ", "ุฃู", "ุงุฐุง", "ุฅุฐุง", "ุบูุฑ", "ุนูุฏ", "ูุง", "ุจูุง", "ู", "ู", "ู"
        ]);

        function analyzeText(text) {
            // 1. ุญุณุงุจ ุงูุฃุญุฑู (ุจูุง ูู ุฐูู ุงููุณุงูุงุช ูุงูุฑููุฒ)
            const charCount = text.length;

            // 2. ูุนุงูุฌุฉ ุงููุต ููุนุฏ
            // - ุฅุฒุงูุฉ ุงูุฑููุฒ ูุงูุฃุฑูุงู ุจุงุณุชุซูุงุก ุงููุณุงูุงุช
            const cleanText = text.replace(/[^\p{L}\s]/gu, '').toLowerCase(); 
            // - ุชูุณูู ุงููุต ุฅูู ูููุงุช
            const words = cleanText.split(/\s+/).filter(word => word.length > 0);
            const totalWordCount = words.length;
            
            // 3. ุชุญููู ุงููููุงุช ููุซุงูุชูุง
            const wordMap = new Map();
            let totalLength = 0;
            
            words.forEach(word => {
                if (!STOP_WORDS.has(word) && word.length > 1) { // ุงุณุชุซูุงุก ูููุงุช ุงูุชููู ูุงููููุงุช ุจุญุฑู ูุงุญุฏ
                    totalLength += word.length;
                    wordMap.set(word, (wordMap.get(word) || 0) + 1);
                }
            });

            const uniqueWordsCount = wordMap.size;
            const avgLength = totalWordCount > 0 ? (totalLength / totalWordCount).toFixed(1) : 0;
            
            // 4. ุชุญุฏูุซ ููุฎุต ุงููุชุงุฆุฌ
            wordCountEl.textContent = totalWordCount;
            charCountEl.textContent = charCount;
            uniqueCountEl.textContent = uniqueWordsCount;
            avgLengthEl.textContent = avgLength;

            // 5. ุฅูุดุงุก ุฌุฏูู ุงููุซุงูุฉ
            renderDensityTable(wordMap, totalWordCount);
        }

        function renderDensityTable(wordMap, totalWords) {
            densityTableBody.innerHTML = '';
            
            if (totalWords === 0) {
                densityContainer.classList.add('hidden');
                return;
            }

            // ุชุญููู ุงูู Map ุฅูู ูุตูููุฉ ูููุฑุฒ (ุชุฑุชูุจ ุชูุงุฒูู ุญุณุจ ุงูุชูุฑุงุฑ)
            const sortedWords = Array.from(wordMap.entries())
                .sort((a, b) => b[1] - a[1])
                .slice(0, 50); // ุนุฑุถ ุฃูู 50 ูููุฉ ููุท

            sortedWords.forEach(([word, count]) => {
                const percentage = ((count / totalWords) * 100).toFixed(2);
                
                const row = document.createElement('tr');
                row.className = 'hover:bg-green-50 transition duration-150';
                
                row.innerHTML = `
                    <td class="whitespace-nowrap font-medium">${word}</td>
                    <td class="whitespace-nowrap">${count}</td>
                    <td class="whitespace-nowrap font-bold">${percentage}%</td>
                `;
                densityTableBody.appendChild(row);
            });

            densityContainer.classList.remove('hidden');
        }

        // ุฑุจุท ุฏุงูุฉ ุงูุชุญููู ุจุญุฏุซ ุงูุฅุฏุฎุงู
        textInput.addEventListener('input', (e) => {
            const text = e.target.value;
            analyzeText(text);
        });

        // ุชุดุบูู ุงูุชุญููู ุนูุฏ ุงูุจุฏุงูุฉ ุฅุฐุง ูุงู ููุงู ูุต ูุญููุธ
        analyzeText(textInput.value); 
    </script>
</body>
</html>