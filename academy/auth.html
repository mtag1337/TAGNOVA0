<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªØ§Ø¬ Ù†ÙˆÙØ§ | TagNova</title>
<script src=""></script>
<script src=""></script>
<style>
@import url('');
body { font-family: 'Cairo', sans-serif; background: #0b0e14; min-height: 100vh; display: flex; align-items: center; justify-content: center; margin: 0; color: white; background-image: radial-gradient(circle at center, #1a1c2e 0%, #0b0e14 100%); }
.glass { background: rgba(22, 27, 34, 0.85); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.05); padding: 2.5rem; border-radius: 2.5rem; width: 100%; max-width: 420px; box-shadow: 0 25px 50px rgba(0,0,0,0.6); }
.in-field { background: #0b0e14; border: 1px solid #1f2937; width: 100%; padding: 15px; border-radius: 18px; margin-bottom: 15px; color: white; outline: none; transition: 0.4s; font-size: 0.9rem; }
.in-field:focus { border-color: #8b5cf6; box-shadow: 0 0 20px rgba(139, 92, 246, 0.2); transform: translateY(-2px); }
.btn-go { background: linear-gradient(135deg, #8b5cf6, #6d28d9); width: 100%; padding: 16px; border-radius: 18px; font-weight: 900; cursor: pointer; transition: 0.4s; font-size: 1.1rem; border: none; color: white; box-shadow: 0 10px 15px rgba(139, 92, 246, 0.3); }
.btn-go:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(139, 92, 246, 0.4); opacity: 0.9; }
.btn-go:disabled { background: #374151; cursor: not-allowed; transform: none; box-shadow: none; }
</style>
</head>
<body>

<div class="glass text-center animate__animated animate__fadeIn">
<img src="logotagnova.png" class="w-32 h-32 mx-auto mb-6 object-contain">
<h2 id="tx-title" class="text-3xl font-black mb-2 tracking-tight">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
<p id="tx-sub" class="text-gray-400 text-sm mb-8">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… <span class="text-purple-500 font-bold italic">ØªØ§Ø¬ Ù†ÙˆÙØ§</span></p>

<form id="authForm">
<div id="nameDiv" style="display:none;">
<input type="text" id="fName" class="in-field" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
</div>
<input type="email" id="uEmail" class="in-field" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
<input type="password" id="uPass" class="in-field" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
<div id="roleDiv" style="display:none;">
<select id="uRole" class="in-field cursor-pointer">
<option value="student">ğŸ‘¨â€ğŸ“ Ø·Ø§Ù„Ø¨ (Ù…ØªØ¯Ø±Ø¨)</option>
<option value="instructor">ğŸ‘¨â€ğŸ« Ù…Ø¯Ø±Ø¨ (Ù…Ø­Ø§Ø¶Ø±)</option>
</select>
</div>
<button type="submit" id="subBtn" class="btn-go">Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ù†ØµØ©</button>
</form>

<button onclick="changeMode()" id="switchBtn" class="mt-8 text-sm text-gray-400 hover:text-purple-400 transition-all">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <span class="text-purple-500 font-bold decoration-2 underline-offset-4 hover:underline">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</span></button>

</div>

<script>
// Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„Ø¯Ø§ØªØ§Ø¨ÙŠØ² - ØªÙ… ÙˆØ¶Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ØµØ­ÙŠØ­
const _sb = supabase.createClient('', 'sb_publishable_DKj_3ziMpBx6GzAjHFkjKw_GJBXNlck');
let loginState = true;

function changeMode() {
loginState = !loginState;
document.getElementById('tx-title').innerText = loginState ? "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„" : "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨";
document.getElementById('subBtn').innerText = loginState ? "Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ù†ØµØ©" : "Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨";
document.getElementById('switchBtn').innerHTML = loginState ? "Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <span class='text-purple-500 font-bold'>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</span>" : "Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <span class='text-purple-500 font-bold'>Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ</span>";
document.getElementById('nameDiv').style.display = loginState ? "none" : "block";
document.getElementById('roleDiv').style.display = loginState ? "none" : "block";
}

document.getElementById('authForm').addEventListener('submit', async (e) => {
e.preventDefault();
const email = document.getElementById('uEmail').value;
const pass = document.getElementById('uPass').value;
const btn = document.getElementById('subBtn');
btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...";
btn.disabled = true;

if(loginState) {
// Ø¯Ø®ÙˆÙ„
const { data, error } = await _sb.auth.signInWithPassword({ email: email, password: pass });
if(error) {
alert("Ø¹Ø°Ø±Ø§Ù‹: " + error.message);
btn.disabled = false;
btn.innerText = "Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ù†ØµØ©";
} else {
const role = data.user.user_metadata.role;
window.location.href = role === 'instructor' ? "dashboard.html" : "index.html";
}
} else {
// ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
const { error } = await _sb.auth.signUp({
email: email, password: pass,
options: { data: { full_name: document.getElementById('fName').value, role: document.getElementById('uRole').value } }
});
if(error) {
alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: " + error.message);
btn.disabled = false;
btn.innerText = "Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨";
} else {
alert("Ù…Ø¨Ø±ÙˆÙƒ! ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ ÙÙŠ ØªØ§Ø¬ Ù†ÙˆÙØ§ Ø¨Ù†Ø¬Ø§Ø­.");
location.reload();
}
}
});
</script>

</body>
</html>
