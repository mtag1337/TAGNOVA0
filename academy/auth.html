<!DOCTYPE html>

<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ØªØ§Ø¬ Ù†ÙˆÙØ§ | TagNova</title>
<script src=""></script>
<script src=""></script>
<style>
@import url('');
body { font-family: 'Cairo', sans-serif; background: #0b0e14; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; color: white; }
.glass { background: rgba(22, 27, 34, 0.7); backdrop-filter: blur(20px); border: 1px solid #1f2937; padding: 2rem; border-radius: 2rem; width: 100%; max-width: 400px; }
.input-box { background: #0b0e14; border: 1px solid #1f2937; width: 100%; padding: 12px; border-radius: 12px; margin-bottom: 15px; color: white; }
</style>
</head>
<body class="p-4">

<div class="glass text-center">
<img src="logotagnova.png" class="w-32 h-32 mx-auto mb-4 object-contain">
<h2 id="title" class="text-2xl font-black">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>

<form id="authForm" class="mt-6">
<div id="nameBox" style="display:none;">
<input type="text" id="fullName" class="input-box" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
</div>
<input type="email" id="email" class="input-box" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
<input type="password" id="password" class="input-box" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
<div id="roleBox" style="display:none;">
<select id="role" class="input-box">
<option value="student">ğŸ‘¨â€ğŸ“ Ø·Ø§Ù„Ø¨</option>
<option value="instructor">ğŸ‘¨â€ğŸ« Ù…Ø¯Ø±Ø¨</option>
</select>
</div>
<button type="submit" id="mainBtn" class="w-full bg-purple-600 p-3 rounded-xl font-bold">Ø¯Ø®ÙˆÙ„</button>
</form>

<button onclick="toggleMode()" id="toggleBtn" class="mt-4 text-sm text-gray-400">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹</button>

</div>

<script>
const _supabase = supabase.createClient('', 'sb_publishable_DKj_3ziMpBx6GzAjHFkjKw_GJBXNlck');
let isLogin = true;

function toggleMode() {
isLogin = !isLogin;
document.getElementById('title').innerText = isLogin ? "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„" : "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨";
document.getElementById('mainBtn').innerText = isLogin ? "Ø¯Ø®ÙˆÙ„" : "Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨";
document.getElementById('toggleBtn').innerText = isLogin ? "Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹" : "Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ";
document.getElementById('nameBox').style.display = isLogin ? "none" : "block";
document.getElementById('roleBox').style.display = isLogin ? "none" : "block";
}

document.getElementById('authForm').addEventListener('submit', async (e) => {
e.preventDefault();
const email = document.getElementById('email').value;
const password = document.getElementById('password').value;
const btn = document.getElementById('mainBtn');
btn.innerText = "Ø¬Ø§Ø±ÙŠ...";

if(isLogin) {
const { data, error } = await _supabase.auth.signInWithPassword({ email, password });
if(error) alert(error.message);
else window.location.href = data.user.user_metadata.role === 'instructor' ? "dashboard.html" : "index.html";
} else {
const { error } = await _supabase.auth.signUp({
email, password,
options: { data: { full_name: document.getElementById('fullName').value, role: document.getElementById('role').value } }
});
if(error) alert(error.message);
else alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨!");
btn.innerText = "Ø¯Ø®ÙˆÙ„";
}
btn.innerText = isLogin ? "Ø¯Ø®ÙˆÙ„" : "Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨";
});
</script>

</body>
</html>
